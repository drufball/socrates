# Styleguide (TypeScript)

This doc captures repo-specific conventions beyond “normal TS”.

## Generated API client

We generate a TypeScript API client from the backend OpenAPI schema.

- **Source of truth**: `backend/openapi.json` (generated from FastAPI)
- **Generated output**: `frontend/lib/api/generated/api.ts`
- **Wrapper**: `frontend/lib/api/index.ts` (config + re-exported types)

### Don’t edit generated code

`frontend/lib/api/generated/api.ts` is generated by `swagger-typescript-api`. Any manual edits will be overwritten.

### Runtime configuration

The API client’s `baseURL` is configured via:

- `NEXT_PUBLIC_BACKEND_ORIGIN` (e.g. `http://127.0.0.1:8000`)

Because this is used in client components, it must be a `NEXT_PUBLIC_*` variable.

### Regenerating the client

When the backend OpenAPI changes:

1. Regenerate `backend/openapi.json` (from `backend/`):

```bash
uv run python scripts/export_openapi.py
```

2. Regenerate the TS client (from `frontend/`):

```bash
npx swagger-typescript-api generate -p ../backend/openapi.json -o ./lib/api/generated -n api.ts --axios --unwrap-response-data
```

3. Commit the resulting diffs (both `backend/openapi.json` and `frontend/lib/api/generated/api.ts`).
